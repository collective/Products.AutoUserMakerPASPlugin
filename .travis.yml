language: python
sudo: false
cache:
  directories:
    - eggs
addons:
  apt:
    packages:
      libxml2-dev
      libxslt-dev
      python-imaging
python:
  - 2.7
  - 3.7
  - 3.8
env:
  - PLONE=5.1
  - PLONE=5.2
matrix:
  exclude:
    - python: 3.7
      env: PLONE=5.1
    - python: 3.8
      env: PLONE=5.1

before_install:
  - pip install --upgrade pip setuptools==42.0.2
install:
  - python bootstrap$(echo $PLONE | cut -f1 -d.).py -c test-$PLONE.x.cfg
  - bin/buildout -t 5 -Nc test-$PLONE.x.cfg
script:
  - bin/coverage run bin/test
after_success:
  - bin/coveralls
